(function(){function e(){this.routes={};Object.defineProperty(this,"pathname",{enumerable:!0,get:function(){return location.pathname},set:function(a){history.pushState({},document.title,a);f()}})}function l(a,b){var d=new XMLHttpRequest;d.open("GET",a.templateUrl,!0);d.onload=function(){200<=d.status&&400>d.status&&b(this.response)};d.send()}function g(a){a.handler&&a.handler();a=new CustomEvent("routechange");window.dispatchEvent(a)}function h(){var a=document.querySelector("base");if(!a)return"";
var b=location.href,b=b.replace(location.pathname,""),b=a.href.replace(b,"");return"/"===b?"":b}function f(){var a=window.route,b=a.routes,d=location.pathname.replace(h(),""),c=b[d]||b[null];c&&(c.template?(a.template=c.template,g(c)):c.templateUrl?l(c,function(b){a.template=b;g(c)}):g(c))}function k(a){"loading"!=document.readyState?a():document.addEventListener("DOMContentLoaded",a)}function m(a){if(!(a.ctrlKey||a.shiftKey||a.metaKey)&&2!==a.button){for(var b=a.target;"A"!==b.nodeName;)if(b===document.body||
!(b=b.parentNode))return;var d=b.href,c=b.getAttribute("href");n.test(d)||!d||b.getAttribute("target")||a.defaultPrevented||(a.preventDefault(),c="/"===c[0]?c:"/"+c,a=h()+c,location.pathname!==a&&(window.route.pathname=a))}}e.prototype.when=function(a,b){this.routes[a]=b;return this};e.prototype.otherwise=function(a){this.when(null,a);return this};window.route=new e;window.addEventListener("popstate",f);k(f);window.addEventListener("routechange",function(){var a=window.route,b=document.querySelector("[data-view]");
b&&(b.innerHTML=a.template,a=new CustomEvent("viewcontentloaded"),b.dispatchEvent(a))});var n=/^\s*(javascript|mailto):/i;k(function(){document.body.addEventListener("click",m)})})();
