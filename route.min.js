(function(d,f,k,m){function e(){this.routes={};Object.defineProperty(this,"pathname",{enumerable:!0,get:function(){return k.pathname},set:function(a){m.pushState({},f.title,a);g()}})}function n(a,b){var c=new XMLHttpRequest;c.open("GET",a.templateUrl,!0);c.onload=function(){200<=c.status&&400>c.status&&b(c.responseText)};c.send()}function h(a){a.handler&&a.handler();a=new CustomEvent("routechange");d.dispatchEvent(a)}function g(){var a=d.route,b=a.routes,c=b[k.pathname]||b[null];c&&(c.template?(a.template=
c.template,h(c)):c.templateUrl?n(c,function(b){a.template=b;h(c)}):h(c))}function l(a){"loading"!=f.readyState?a():f.addEventListener("DOMContentLoaded",a)}function p(a){if(!(a.ctrlKey||a.shiftKey||a.metaKey)&&2!==a.button){for(var b=a.target;"A"!==b.nodeName;)if(b===f.body||!(b=b.parentNode))return;var c=b.href,e=b.getAttribute("href");q.test(c)||!c||b.getAttribute("target")||a.defaultPrevented||(a.preventDefault(),d.route.pathname="/"===e[0]?e:"/"+e)}}e.prototype.when=function(a,b){this.routes[a]=
b;return this};e.prototype.otherwise=function(a){this.when(null,a);return this};d.route=new e;d.addEventListener("popstate",g);l(g);d.addEventListener("routechange",function(){var a=d.route,b=f.querySelector("[data-view]");b&&(b.innerHTML=a.template,a=new CustomEvent("viewcontentloaded"),b.dispatchEvent(a))});var q=/^\s*(javascript|mailto):/i;l(function(){f.body.addEventListener("click",p)})})(window,document,location,history);
