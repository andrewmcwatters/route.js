(function(){function e(){var a=document.querySelector("base");return a?a.getAttribute("href").replace(/\/$/,""):""}function f(){this.routes={};Object.defineProperty(this,"pathname",{enumerable:!0,get:function(){return location.pathname.replace(e(),"")},set:function(a){a=e()+a;history.pushState({},document.title,a);g()}})}function l(a,b){var c=new XMLHttpRequest,d=a.templateUrl,d="/"===d[0]?d:"/"+d;c.open("GET",e()+d,!0);c.onload=function(){200<=c.status&&400>c.status&&b(this.response)};c.send()}function h(a){a.handler&&
a.handler();a=new CustomEvent("routechange");window.dispatchEvent(a)}function g(){var a=window.route,b=a.routes,c=b[a.pathname]||b[null];c&&(c.template?(a.template=c.template,h(c)):c.templateUrl?l(c,function(b){a.template=b;h(c)}):h(c))}function k(a){"loading"!=document.readyState?a():document.addEventListener("DOMContentLoaded",a)}function m(a){if(!(a.ctrlKey||a.shiftKey||a.metaKey)&&2!==a.button){for(var b=a.target;"A"!==b.nodeName;)if(b===document.body||!(b=b.parentNode))return;var c=b.href,d=
b.getAttribute("href");n.test(c)||!c||b.getAttribute("target")||a.defaultPrevented||(a.preventDefault(),a="/"===d[0]?d:"/"+d,location.pathname!==a&&(window.route.pathname=a))}}f.prototype.when=function(a,b){this.routes[a]=b;return this};f.prototype.otherwise=function(a){this.when(null,a);return this};window.route=new f;window.addEventListener("popstate",g);k(g);window.addEventListener("routechange",function(){var a=window.route,b=document.querySelector("[data-view]");b&&(b.innerHTML=a.template,a=
new CustomEvent("viewcontentloaded"),b.dispatchEvent(a))});var n=/^\s*(javascript|mailto):/i;k(function(){document.body.addEventListener("click",m)})})();
