(function(){function d(){this.routes={};Object.defineProperty(this,"pathname",{enumerable:!0,get:function(){return location.pathname},set:function(a){history.pushState({},document.title,a);e()}})}function h(a,b){var c=new XMLHttpRequest;c.open("GET",a.templateUrl,!0);c.onload=function(){200<=c.status&&400>c.status&&b(this.response)};c.send()}function f(a){a.handler&&a.handler();a=new CustomEvent("routechange");window.dispatchEvent(a)}function e(){var a=window.route,b=a.routes,c=b[location.pathname]||
b[null];c&&(c.template?(a.template=c.template,f(c)):c.templateUrl?h(c,function(b){a.template=b;f(c)}):f(c))}function g(a){"loading"!=document.readyState?a():document.addEventListener("DOMContentLoaded",a)}function k(a){if(!(a.ctrlKey||a.shiftKey||a.metaKey)&&2!==a.button){for(var b=a.target;"A"!==b.nodeName;)if(b===document.body||!(b=b.parentNode))return;var c=b.href,d=b.getAttribute("href");l.test(c)||!c||b.getAttribute("target")||a.defaultPrevented||(a.preventDefault(),a="/"===d[0]?d:"/"+d,location.pathname!==
a&&(window.route.pathname=a))}}d.prototype.when=function(a,b){this.routes[a]=b;return this};d.prototype.otherwise=function(a){this.when(null,a);return this};window.route=new d;window.addEventListener("popstate",e);g(e);window.addEventListener("routechange",function(){var a=window.route,b=document.querySelector("[data-view]");b&&(b.innerHTML=a.template,a=new CustomEvent("viewcontentloaded"),b.dispatchEvent(a))});var l=/^\s*(javascript|mailto):/i;g(function(){document.body.addEventListener("click",
k)})})();
