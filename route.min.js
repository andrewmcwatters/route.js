(function(d,e,h,m){function f(){this.routes={}}function n(a,b){var c=new XMLHttpRequest;c.open("GET",a.templateUrl,!0);c.onload=function(){200<=c.status&&400>c.status&&b(c.responseText)};c.send()}function k(a){a.handler&&a.handler();a=new CustomEvent("routechange");d.dispatchEvent(a)}function g(){var a=d.route,b=a.routes,c=b[h.pathname]||b[null];c.templateUrl?n(c,function(b){a.template=b;k(c)}):k(c)}var l=h.pathname;Object.defineProperty(f,"pathname",{enumerable:!0,get:function(){return l},set:function(a){l=
a;m.pushState({},e.title,a);g()}});f.prototype.when=function(a,b){this.routes[a]=b;return this};f.prototype.otherwise=function(a){this.when(null,a);return this};d.route=new f;d.addEventListener("popstate",g);(function(a){"loading"!=e.readyState?a():e.addEventListener("DOMContentLoaded",a)})(g);d.addEventListener("routechange",function(){var a=d.router,b=e.querySelector("[data-view]");b&&(b.innerHTML=a.template,a=new CustomEvent("viewcontentloaded"),b.dispatchEvent(a))});var p=/^\s*(javascript|mailto):/i;
e.body.addEventListener("click",function(a){if(!(a.ctrlKey||a.shiftKey||a.metaKey)&&2!==a.button){for(var b=a.target;"A"!==b.nodeName;)if(b===e.body||!(b=b.parentNode))return;var c=b.href,d=b.getAttribute("href");p.test(c)||!c||b.getAttribute("target")||a.defaultPrevented||(console.log(c,d),a.preventDefault())}})})(window,document,location,history);
